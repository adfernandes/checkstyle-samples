plugins {
    id 'java'
    id 'checkstyle'
}

group = 'com.github.sevntu-checkstyle'
version = '0.0.1-SNAPSHOT'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

checkstyle {
    ignoreFailures = true
    configFile = file("${project.rootDir}/checkstyle.xml")
}

repositories {
    mavenLocal()
    mavenCentral()
    // legacy repo, example usage
    maven {
        url "https://sevntu-checkstyle.github.com/sevntu.checkstyle/maven2"
    }
}

configurations {
    checkstyle
}

ext {
    checkstyleVersion = '11.0.0'
    sevntuChecksVersion = '1.44.1'
}

dependencies {
    checkstyle "com.puppycrawl.tools:checkstyle:${checkstyleVersion}"
    checkstyle "com.github.sevntu-checkstyle:sevntu-checks:${sevntuChecksVersion}"
}

tasks.named("checkstyleMain").configure {
    source = sourceSets.main.allSource
}
